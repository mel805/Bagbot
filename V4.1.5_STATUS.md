# Status v4.1.5 - En cours de d√©bogage

## ‚úÖ Fonctionnalit√©s impl√©ment√©es

### 1. Onglet Musique restaur√©
- **Fichier**: `android-app/app/src/main/java/com/bagbot/manager/App.kt`
- Ajout de `MusicScreen` avec 2 sous-onglets:
  - üéµ **Uploads**: Liste des fichiers audio upload√©s
  - üìã **Playlists**: √Ä venir
- Nouveau bouton de navigation (tab 4)
- Endpoint backend: `GET /api/music/uploads`

### 2. Actions/V√©rit√©s s√©par√©s dans A/V  
- **Fichier**: `android-app/app/src/main/java/com/bagbot/manager/ui/screens/ConfigDashboardScreen.kt`
- Double TabRow:
  - Ligne 1: Mode SFW/NSFW
  - Ligne 2: Type V√©rit√©s/Actions
- Compteurs dynamiques par type
- Filtrage des prompts par type
- Ajout automatique dans l'onglet actif

### 3. Backend endpoints
- **Fichier**: `dashboard-v2/server-v2.js`
- `GET /api/music/uploads`: Liste fichiers audio (mp3, wav, m4a, ogg, flac)
- `GET /api/dashboard/stats`: Statistiques serveur
- `GET /api/admin/logs/:service`: Logs PM2
- `POST /api/admin/restart/:service`: Red√©marrage PM2

## ‚ùå Probl√®me de compilation GitHub Actions

### Erreur
```
e: Unresolved reference: TicketsConfigTab
e: Unresolved reference: LogsConfigTab
e: Unresolved reference: ConfessConfigTab
... (toutes les fonctions apr√®s ligne 152)
```

### Diagnostic effectu√©
1. ‚úÖ Toutes les fonctions existent bien dans le fichier
2. ‚úÖ Toutes ont leur annotation `@Composable`
3. ‚úÖ Comptage des accolades: √©quilibr√©
4. ‚úÖ Signatures correctes
5. ‚úÖ v4.1.4 compile sans erreur
6. ‚úÖ Ajout de `./gradlew clean` avant build

### Hypoth√®ses
- Le fichier `ConfigDashboardScreen.kt` est tr√®s volumineux (5712 lignes)
- Possible probl√®me de parsing Kotlin avec un fichier aussi grand
- Les modifications dans `TruthDareConfigTab` (lignes 3543-3816) semblent d√©clencher l'erreur
- Compilation locale impossible (SDK Android non configur√©)

### Modifications apport√©es
- Remplacement `Icons.Default.QuestionMark` ‚Üí `Icons.Default.Info`
- Remplacement `Icons.Default.EmojiPeople` ‚Üí `Icons.Default.Person`
- Ajout variable `promptType` pour filtrage
- Ajout `filteredPrompts` pour tri

## üìã Prochaines √©tapes

### Option 1: Rollback partiel
- Garder l'onglet Musique
- Rollback les modifications A/V
- Release v4.1.5 avec musique uniquement

### Option 2: D√©buggage approfondi
- Tester chaque modification individuellement
- Isoler la ligne exacte causant le probl√®me
- Peut-√™tre refactoriser `ConfigDashboardScreen.kt` en plusieurs fichiers

### Option 3: Simplification
- Impl√©menter A/V s√©par√© diff√©remment (sans double TabRow)
- R√©duire la complexit√© du code

## üìä Commits
- `feat(v4.1.5): Musique, A/V s√©par√©s, endpoints complets` (0584b5b)
- `fix(v4.1.5): Icones Material manquantes` (ce71829)
- `fix: Add Gradle clean before build` (79fe2c0)

## üîó Tests
- Test v4.1.4: En cours de compilation
- Test v4.1.5: √âchoue syst√©matiquement
